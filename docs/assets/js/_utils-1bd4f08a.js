import{t as n,p as r}from"./index-9d680563.js";import{h as t}from"./system-75c72d1a.js";import"./dayjs-21617033.js";import{l as o}from"./lodash-8dc1f9dc.js";function e(r,t){if(!t)return;const{attrs:l,children:i}=r,{attrs:s,...a}=t;r.attrs=l?o.merge({},s,l):s,null==i||i.forEach((r=>{if("Object"!==n(r))return!1;e(r,t)})),o.merge(r,a,JSON.parse(JSON.stringify(r)))}function l(r){const t={};return null==r||r.map((r=>{if("Object"!==n(r))return;const{prop:o}=r;t[o]=void 0})),t}function i(o=[],s,a,d){const c={data:{},fields:[]};return o.forEach(((o,u)=>{if("Object"!==n(o))return null;const{type:f,prop:p,children:h}=o,v=n(p);if(t(o,a),"String"===v){let n=null==a?void 0:a[p];if("checkbox"===f&&void 0===n)n=!1;else if("addDel"===f)c.data[p]=(null==n?void 0:n.length)?n:[l(h)];else{const r=(null==h?void 0:h.length)?i(h,s,n).data:n;c.data[p]=r,void 0!==r&&(null==s||s("change",p,r))}}else if("Array"===v){const[n,t]=p,e=null==a?void 0:a[t],l=null==a?void 0:a[n],i=p.join(r),d=void 0===l&&void 0===e?void 0:[l,e];c.data[i]=d,o.prop=i,void 0!==d&&(null==s||s("change",i,d))}else{if("Undefined"!==v)throw new Error(`暂未处理prop为${v}类型的值`);if(!h)throw new Error("不能同时没有prop和children属性");if(h.length){const n={},t=h.map((r=>{const{prop:t}=r;return n[t]=null==a?void 0:a[t],t})).join(r),e=n;o.prop=t,c.data[t]=e,Object.keys(e).length&&(null==s||s("change",t,e))}}e(o,d),(null==h?void 0:h.length)&&(null==h||h.forEach((r=>{if("Object"!==n(r))return!1}))),c.fields.push(o)})),c}export{l as g,i as h};
