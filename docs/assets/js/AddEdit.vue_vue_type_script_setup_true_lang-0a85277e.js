import e from"./IconPicker-c3e5fb92.js";import{v as t,S as a}from"./index-9d680563.js";import{G as r,a as o,b as p}from"./auth-6f50c939.js";import s from"./MenuTree-790a481e.js";import"./dayjs-21617033.js";import"./lodash-8dc1f9dc.js";import{d as n,$ as i,k as l,ai as u,o as d,P as m,Q as c,W as h,u as _,E as y}from"./@vue-2b5461a3.js";const b=n({name:"SystemMenuAddEdit",__name:"AddEdit",props:{data:{},menuTree:{},refreshList:{}},setup(n){var b;const{getOpts:x,getText:f}=t(),v=x("YesNoStatus"),X=x("EnableStatus"),g=x("MenuType"),q=n;let j=i(Object.assign({type:1,order:1,is_cache:1,is_link:0,is_blank_open:0,is_show:1,status:1,icon:a},q.data));const V=l((()=>{const e=j.type;return[{prop:"type",label:"菜单类型",required:!0,type:"radio-group",options:g,extra:{popover:"目录：XXXX；菜单：XXXX；按钮：XXXXX"},attrs:{type:"button"}},1===e&&{prop:"parent_id",label:"上级菜单",type:"custom",extra:{popover:"上级菜单"}},{prop:"name",label:f("MenuType",e)+"名称",required:!0,attrs:{maxlength:10}},2!==e&&{prop:"icon",label:"图标",type:"custom",required:!0},...2===e?[{prop:"perms",label:"权限标识",attrs:{placeholder:"请输入权限标识，用,或，隔开（示例：0,1，2）"}}]:[],{prop:"order",label:"排序",required:!0,type:"input-number",extra:{popover:"数值越大越靠后"},attrs:{style:"width: 205px",placeholder:"数值越小，越靠前"}},...1===e?[{prop:"component_path",label:"组件路径",required:!0,extra:{popover:"仅输入src/views后面的路径即可"}},{prop:"menu_path",label:"路由地址",required:!0,extra:{example:"/auth",tips:"建议跟组件路径保持一致"}},{prop:"is_cache",label:"是否缓存",type:"radio-group",required:!0,options:v,extra:{span:12,popover:"是否缓存该页面"}},{prop:"is_show",label:"是否显示",type:"radio-group",required:!0,options:v,extra:{span:12,popover:"在菜单目录中是否可见"}},{prop:"is_link",label:"是否外链",required:!0,type:"radio-group",options:v,extra:{span:12}},1===j.is_link&&{prop:"is_blank_open",label:"新窗口打开",required:!0,type:"radio-group",options:v,extra:{span:12}}]:[],{prop:"status",label:"状态",required:!0,type:"radio-group",options:X,extra:{span:12,popover:"启用后，在菜单中可见，否则不可见"}}]}));function k(e,t){"component_path"===e&&(j.menu_path||(j.menu_path=t.replace(".vue","")))}return function(e){if(!e)return;r({id:e}).then((e=>{const{type:t}=e;2===t&&(e.type=1),3===t&&(e.type=2),Object.assign(j,e)}))}(null==(b=q.data)?void 0:b.id),(t,a)=>{const r=u("BaseForm");return d(),m(r,{modelValue:_(j),"onUpdate:modelValue":a[2]||(a[2]=e=>y(j)?j.value=e:j=e),style:{width:"600px"},fields:V.value,fetch:t.data?_(o):_(p),fetchSuccess:t.refreshList,onChange:k},{parent_id:c((()=>[h(s,{data:t.menuTree,modelValue:_(j).parent_id,"onUpdate:modelValue":a[0]||(a[0]=e=>_(j).parent_id=e)},null,8,["data","modelValue"])])),icon:c((({})=>[h(e,{modelValue:_(j).icon,"onUpdate:modelValue":a[1]||(a[1]=e=>_(j).icon=e)},null,8,["modelValue"])])),_:1},8,["modelValue","fields","fetch","fetchSuccess"])}}});export{b as _};
