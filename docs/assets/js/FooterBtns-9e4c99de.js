import{x as e}from"./@element-plus-c17b3efe.js";import{g as s}from"./index-2f344439.js";import{f as t,o,l as a,g as i,s as r,_ as n}from"./index-9d680563.js";import"./dayjs-21617033.js";import{d as m,D as l,e as p,k as d,f as u,ai as c,aq as f,o as j,c as b,R as h,P as v,Q as g,W as y,K as x,U as B,V as k,T,F,a9 as _,u as q}from"./@vue-2b5461a3.js";import"./lodash-8dc1f9dc.js";import"./call-bind-ada3a9fc.js";import"./get-intrinsic-176af07e.js";import"./es-errors-c8ed318b.js";import"./has-symbols-456daba2.js";import"./has-proto-c2a23985.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./set-function-length-968dc075.js";import"./define-data-property-9d7bf764.js";import"./es-define-property-c2edbfb6.js";import"./gopd-16a4ddf0.js";import"./has-property-descriptors-52e43c9d.js";import"./element-plus-ee430b3a.js";import"./lodash-es-d4f5f48c.js";import"./@vueuse-2ec33eb0.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./qs-238f3f4b.js";import"./side-channel-5a41c40a.js";import"./object-inspect-0d550a97.js";import"./axios-b9284f1b.js";import"./pinia-5cbb4d0f.js";import"./mock-04205f76.js";import"./mockjs-217213d3.js";import"./vue-router-7f68ddec.js";import"./nprogress-b5e58671.js";import"./vite-plugin-mock-6db8ade2.js";import"./path-to-regexp-83a43451.js";const P={class:"footer-btns f-c-c f-0 pt-h pb-h"},R=n(m({name:"FooterBtns",__name:"FooterBtns",props:{loading:{type:Boolean},submitText:{default:"提交"},resetText:{default:"重置"},moreBtns:{default:()=>[]},formRef:{},isOmit:{type:Boolean,default:!0},log:{type:Boolean},debug:{type:Boolean},params:{},fetch:{},fetchSuccess:{},fetchFail:{},noSubmitProps:{},handleRequest:{},disabled:{type:Boolean}},emits:["moreBtns","submit"],setup(n,{expose:m,emit:R}){const w=l("closePopup"),C=n,S=R,z=p(!1),O=d((()=>C.moreBtns.map((e=>s(e)))));function D(){const{log:e,debug:s,isOmit:n,noSubmitProps:m}=C;return new Promise(((l,p)=>{let{params:d,formRef:u,handleRequest:c}=C;u&&u.validate(((u,f)=>{if(u){if(d=t(d),c&&(d=c(d)),n&&(d=o(d)),d=a(d,m),(e||s)&&(i(d,"req"),s))return;l(d)}else{const e=Object.values(f)[0][0];r(e.message,"error"),p(e)}}))}))}u((()=>C.loading),(e=>{z.value=e}));const I=(e=C.submitText+"成功！",s,t,o=!0)=>{r(e),w(s),null==t||t()};function L(){D().then((e=>{const{log:s,fetch:t,fetchSuccess:o=I,fetchFail:a,submitText:r}=C;t?(z.value=!0,t(e).then((e=>{s&&i(e,"res"),o(r+"成功！")})).catch((()=>{null==a||a()})).finally((()=>{z.value=!1}))):S("submit",e)})).catch((()=>{}))}function V(){const{formRef:e}=C;e&&e.resetFields()}function A(e){const{name:s,validate:t,to:o}=e;void 0===o&&(t?D().then((e=>{S("moreBtns",s,e,I)})).catch((()=>{})):S("moreBtns",s,C.params,I))}return m({formValidate:D,submit:L}),(s,t)=>{const o=c("BaseIcon"),a=c("el-button"),i=c("BaseBtn"),r=f("debounce");return j(),b("div",P,[s.submitText?h((j(),v(a,{key:0,type:"primary",disabled:s.disabled||z.value},{icon:g((()=>[y(o,{class:x({rotate:z.value}),name:z.value?"Loading":"Promotion"},null,8,["class","name"])])),default:g((()=>[B(" "+k(s.submitText),1)])),_:1},8,["disabled"])),[[r,L,void 0,{immediate:!0}]]):T("",!0),(j(!0),b(F,null,_(O.value,((e,t)=>(j(),b(F,{key:t},[e.popconfirm?(j(),v(i,{key:0,onClick:s=>A(e),name:e,disabled:s.disabled},null,8,["onClick","name","disabled"])):h((j(),v(i,{key:1,name:e,disabled:s.disabled},null,8,["name","disabled"])),[[r,()=>A(e),void 0,{immediate:!0}]])],64)))),128)),s.resetText?(j(),v(a,{key:1,icon:q(e),onClick:V,disabled:s.disabled||z.value},{default:g((()=>[B(k(s.resetText),1)])),_:1},8,["icon","disabled"])):T("",!0)])}}}),[["__scopeId","data-v-f6493dc7"]]);export{R as default};
