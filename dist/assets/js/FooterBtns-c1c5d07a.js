import{x as e}from"./@element-plus-df896130.js";import{g as s}from"./index-ab647bfb.js";import{f as t,o,l as i,g as a,s as r,_ as n}from"./index-df51bfa3.js";import"./dayjs-70c6b0b9.js";import{d as m,D as l,e as p,k as d,f as u,ai as c,aq as j,o as f,c as b,R as h,P as v,Q as y,W as g,K as x,U as B,V as k,T,F,a9 as P,u as _}from"./@vue-2b5461a3.js";import"./lodash-e3f0fdcb.js";import"./call-bind-2df1f9b5.js";import"./get-intrinsic-176af07e.js";import"./es-errors-c8ed318b.js";import"./has-symbols-456daba2.js";import"./has-proto-c2a23985.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./set-function-length-af5653fd.js";import"./define-data-property-80a6b8d7.js";import"./es-define-property-c2edbfb6.js";import"./gopd-991ce5b0.js";import"./has-property-descriptors-52e43c9d.js";import"./element-plus-568f2232.js";import"./lodash-es-d4f5f48c.js";import"./@vueuse-2ec33eb0.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./qs-349681aa.js";import"./side-channel-4fcbcfeb.js";import"./object-inspect-1fd817f8.js";import"./axios-b9284f1b.js";import"./pinia-5cbb4d0f.js";import"./mock-281f81b0.js";import"./mockjs-21e11712.js";import"./vue-router-27db6c8e.js";import"./nprogress-61860a65.js";import"./vite-plugin-mock-fcfbfb18.js";import"./path-to-regexp-83a43451.js";import"./vue-i18n-aaa7cda4.js";import"./@intlify-34459bb4.js";import"./xlsx-8a748b86.js";const q={class:"footer-btns f-c-c f-0 pt-h pb-h"},R=n(m({name:"FooterBtns",__name:"FooterBtns",props:{loading:{type:Boolean},submitText:{default:"提交"},resetText:{default:"重置"},moreBtns:{default:()=>[]},formRef:{},isOmit:{type:Boolean,default:!0},log:{type:Boolean},debug:{type:Boolean},params:{},fetch:{},fetchSuccess:{},fetchFail:{},noSubmitProps:{},handleRequest:{},disabled:{type:Boolean}},emits:["moreBtns","submit"],setup(n,{expose:m,emit:R}){const w=l("closePopup"),C=n,S=R,O=p(!1),z=d((()=>C.moreBtns.map((e=>s(e)))));function D(){const{log:e,debug:s,isOmit:n,noSubmitProps:m}=C;return new Promise(((l,p)=>{let{params:d}=C;const{formRef:u,handleRequest:c}=C;u&&u.validate(((u,j)=>{if(u){if(d=t(d),c&&(d=c(d)),n&&(d=o(d)),d=i(d,m),(e||s)&&(a(d,"req"),s))return;l(d)}else{const e=Object.values(j)[0][0];r(e.message,"error"),p(e)}}))}))}u((()=>C.loading),(e=>{O.value=e}));const I=(e=C.submitText+"成功！",s,t,o=!0)=>{r(e),w(s),null==t||t()};function K(){D().then((e=>{const{log:s,fetch:t,fetchSuccess:o=I,fetchFail:i,submitText:r}=C;t?(O.value=!0,t(e).then((e=>{s&&a(e,"res"),o(r+"成功！")})).catch((e=>{null==i||i(e)})).finally((()=>{O.value=!1}))):S("submit",e)})).catch((()=>{}))}function V(){const{formRef:e}=C;e&&e.resetFields()}function A(e){const{name:s,validate:t,to:o}=e;void 0===o&&(t?D().then((e=>{S("moreBtns",s,e,I)})).catch((()=>{})):S("moreBtns",s,C.params,I))}return m({formValidate:D,submit:K}),(s,t)=>{const o=c("BaseIcon"),i=c("el-button"),a=c("BaseBtn"),r=j("debounce");return f(),b("div",q,[s.submitText?h((f(),v(i,{key:0,type:"primary",disabled:s.disabled||O.value},{icon:y((()=>[g(o,{class:x({rotate:O.value}),name:O.value?"Loading":"Promotion"},null,8,["class","name"])])),default:y((()=>[B(" "+k(s.submitText),1)])),_:1},8,["disabled"])),[[r,K,void 0,{immediate:!0}]]):T("",!0),(f(!0),b(F,null,P(z.value,((e,t)=>(f(),b(F,{key:t},[e.popconfirm?(f(),v(a,{key:0,onClick:s=>A(e),name:e,disabled:s.disabled},null,8,["onClick","name","disabled"])):h((f(),v(a,{key:1,name:e,disabled:s.disabled},null,8,["name","disabled"])),[[r,()=>A(e),void 0,{immediate:!0}]])],64)))),128)),s.resetText?(f(),v(i,{key:1,icon:_(e),onClick:V,disabled:s.disabled||O.value},{default:y((()=>[B(k(s.resetText),1)])),_:1},8,["icon","disabled"])):T("",!0)])}}}),[["__scopeId","data-v-c93268d0"]]);export{R as default};
