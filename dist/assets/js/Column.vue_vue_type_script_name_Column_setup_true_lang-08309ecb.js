var e,t,l;import{c as o,m as a,l as n,k as r,I as s,J as u,p as i,s as d}from"./index-df51bfa3.js";import"./dayjs-70c6b0b9.js";import p from"./GroupBtns-baf5df96.js";import c from"./UserInfo-1d530967.js";import{d as y,o as m,P as v,M as f,T as k,bd as g,u as B,ad as h,c as _,Q as b,F as w,ai as x,a9 as C,W as $,U as V,V as j,J as I,a as L}from"./@vue-2b5461a3.js";import{_ as T}from"./BaseRender.vue_vue_type_script_setup_true_lang-170fc1f8.js";const G=y({__name:"CustomSpecialTableCols",props:{col:{},row:{}},setup:e=>(e,t)=>"UserInfo"===e.col.type?(m(),v(c,f({key:0,data:e.row[e.col.prop]},e.col.attrs),null,16,["data"])):k("",!0)}),O=y({name:"Column",__name:"Column",props:g({col:{},disabled:{type:Boolean},selection:{type:Boolean},refreshList:{type:Function},groupBtnsAttrs:{},getGroupBtnsOfRow:{type:Function}},Object.assign({},null==(l=null==(t=null==(e=o)?void 0:e.BaseCrud)?void 0:t._components)?void 0:l.Column)),emits:["groupBtn"],setup(e,{emit:t}){const l=e,o=t;let c;const y=function(e){var t;c=a(null==(t=e.extra)?void 0:t.popover),"string"!=typeof e.label&&(e.customLabel=e.label,e.label="");return delete e.extra,e}(l.col);function g(e,t){var l,o;return!y.prop.startsWith("$")&&(null==(l=e.data)?void 0:l.length)&&void 0===(null==(o=e.data[0])?void 0:o[t.property])}function O(e,t,l=0){const o=t.split(i),a=null==e?void 0:e[null==o?void 0:o[l]];return u(a)}return(e,t)=>{var a;const R=x("el-table-column"),S=x("Column",!0),A=x("BaseIcon"),F=x("el-popover"),U=x("el-switch"),Q=x("BaseTag"),J=x("BaseImg"),K=x("BaseText"),W=x("BaseCopy");return B(y).type&&["index","selection"].includes(B(y).type)?(m(),v(R,h(f({key:0},B(y))),null,16)):(m(),_(w,{key:1},[(null==(a=B(y).children)?void 0:a.length)?(m(),v(R,f({key:0},B(n)(B(y),["children"]),{"reserve-selection":e.selection}),{default:b((()=>{var t;return[(m(!0),_(w,null,C(null==(t=B(y))?void 0:t.children,((t,l)=>(m(),v(S,{col:t,selection:e.selection,refreshList:e.refreshList,groupBtnsAttrs:e.groupBtnsAttrs,getGroupBtnsOfRow:e.getGroupBtnsOfRow,disabled:e.disabled,key:l},null,8,["col","selection","refreshList","groupBtnsAttrs","getGroupBtnsOfRow","disabled"])))),128))]})),_:1},16,["reserve-selection"])):(m(),_(w,{key:1},[B(y).formatter?(m(),v(R,f({key:0},B(y),{formatter:B(y).formatter,"reserve-selection":e.selection}),{header:b((({column:e,$index:t,store:l,_self:o})=>[$(T,{data:e.label},null,8,["data"]),B(c)?(m(),v(F,h(f({key:0},B(c))),{reference:b((()=>[$(A,{color:B(r).colorInfo,name:"QuestionFilled"},null,8,["color"])])),default:b((()=>[B(c).defaultSlot?(m(),v(T,{key:0,data:B(c).defaultSlot},null,8,["data"])):k("",!0)])),_:1},16)):k("",!0)])),_:1},16,["formatter","reserve-selection"])):(m(),v(R,f({key:1},B(y),{"reserve-selection":e.selection}),{header:b((({column:e,$index:t,store:l,_self:o})=>[B(y).customLabel?(m(),v(T,{key:0,data:B(y).customLabel},null,8,["data"])):(m(),v(T,{key:1,data:B(s)(e.label,g(o,e)?void 0:"")},null,8,["data"])),B(c)?(m(),v(F,h(f({key:2},B(c))),{reference:b((()=>[$(A,{color:g(o,e)?B(r).colorDanger:B(r).colorInfo,name:"QuestionFilled"},null,8,["color"])])),default:b((()=>[B(c).defaultSlot?(m(),v(T,{key:0,data:B(c).defaultSlot},null,8,["data"])):k("",!0)])),_:2},1040)):k("",!0)])),default:b((({row:t,column:a,$index:r})=>{var s,c,k,g;return[B(y).type?"operate"===B(y).type?(m(),v(p,f({key:1,row:{...t,$index:r},btns:null==(s=e.getGroupBtnsOfRow)?void 0:s.call(e,t,r)},e.groupBtnsAttrs,{onClick:(e,l)=>function(e,{row:t,col:l,$index:a},n){o("groupBtn",e,{row:t,col:l,$index:a},n)}(e,{row:t,col:B(y),$index:r},l)}),null,16,["row","btns","onClick"])):"sort"===B(y).type?(m(),v(A,{key:2,name:"Sort",size:"1.2em"})):["id","remark"].includes(B(y).type)?(m(),_(w,{key:3},[V(j(B(u)(null==t?void 0:t[B(y).prop])),1)],64)):"custom"===B(y).type?I(e.$slots,"custom",h(f({key:4},{row:t,col:B(y),ind:r}))):["create","update"].includes(B(y).type)?(m(),_(w,{key:5},[(null==(c=B(y).prop)?void 0:c.includes(B(i)))?(m(),_(w,{key:0},[L("div",null,[$(T,{data:O(t,B(y).prop,0)},null,8,["data"])]),L("div",null,[$(T,{data:O(t,B(y).prop,1)},null,8,["data"])])],64)):(m(),_(w,{key:1},[V(j(B(u)(null==t?void 0:t[B(y).prop])),1)],64))],64)):"switch"===B(y).type?(m(),_(w,{key:6},[(null==(g=null==(k=B(y))?void 0:k.attrs)?void 0:g.fetch)?(m(),v(U,f({key:0,modelValue:t[B(y).prop]},B(n)(B(y).attrs,["onChange"]),{onChange:e=>function(e,t,o){const{attrs:a={}}=e,{fetch:n,idKeys:r=["id","id"],statusKey:s="status"}=a,u=(null==a?void 0:a.activeValue)===t[s]?"in":"";-1!==o&&(null==n||n({[r[0]]:t[r[1]],[s]:null==a?void 0:a[u+"activeValue"]}).then((()=>{var e;d(`${null==a?void 0:a[u+"activeText"]}成功`),null==(e=l.refreshList)||e.call(l)})))}(B(y),t,r)}),null,16,["modelValue","onChange"])):(m(),v(U,f({key:1,modelValue:t[B(y).prop],"onUpdate:modelValue":e=>t[B(y).prop]=e},B(y).attrs),null,16,["modelValue","onUpdate:modelValue"]))],64)):"BaseTag"===B(y).type?(m(),v(Q,f({key:7,value:t[B(y).prop]},B(y).attrs),null,16,["value"])):"BaseImg"===B(y).type?(m(),_(w,{key:8},[t[B(y).prop]?(m(),v(J,f({key:0,style:{margin:"0 auto"},src:t[B(y).prop]},B(y).attrs),null,16,["src"])):(m(),_(w,{key:1},[V("-")],64))],64)):"BaseText"===B(y).type?(m(),v(K,h(f({key:9},B(y).attrs)),{default:b((()=>[V(j(B(u)(t[B(y).prop])),1)])),_:2},1040)):"BaseCopy"===B(y).type?(m(),v(W,f({key:10,text:t[B(y).prop]},B(y).attrs),null,16,["text"])):(m(),v(G,{key:11,row:t,col:B(y)},null,8,["row","col"])):(m(),_(w,{key:0},[V(j(B(u)(t[B(y).prop])),1)],64))]})),_:3},16,["reserve-selection"]))],64))],64))}}});export{O as _};
