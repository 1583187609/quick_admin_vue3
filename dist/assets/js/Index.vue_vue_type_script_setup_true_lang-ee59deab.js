import e from"./IconPicker-5e9ca972.js";import{a as t,P as a,b as r}from"./auth-6e60c593.js";import{N as o}from"./index-df51bfa3.js";import p from"./MenuTree-464a96b0.js";import"./dayjs-70c6b0b9.js";import"./lodash-e3f0fdcb.js";import{u as s}from"./dict-map-b95c54a5.js";import"./nprogress-61860a65.js";import{d as n,$ as i,k as l,ai as u,o as d,P as m,Q as c,W as h,u as _}from"./@vue-2b5461a3.js";const y=n({name:"SystemMenuAddEditIndex",__name:"Index",props:{data:{},menuTree:{},refreshList:{}},setup(n){var y;const{getText:b}=s(),x=n,f=i(Object.assign({type:1,order:1,is_cache:1,is_link:0,is_blank_open:0,is_show:1,status:1,icon:o},x.data)),v=l((()=>{const e=f.type;return[{prop:"type",label:"菜单类型",required:!0,type:"radio-group",options:"MenuType",extra:{popover:"目录：XXXX；菜单：XXXX；按钮：XXXXX"},attrs:{type:"button"}},1===e&&{prop:"parent_id",label:"上级菜单",type:"custom",extra:{popover:"上级菜单"}},{prop:"name",label:b("MenuType",e)+"名称",required:!0,attrs:{maxlength:10}},2!==e&&{prop:"icon",label:"图标",type:"custom",required:!0},...2===e?[{prop:"perms",label:"权限标识",attrs:{placeholder:"请输入权限标识，用,或，隔开（示例：0,1，2）"}}]:[],{prop:"order",label:"排序",required:!0,type:"input-number",extra:{popover:"数值越大越靠后"},attrs:{style:"width: 205px",placeholder:"数值越小，越靠前"}},...1===e?[{prop:"component_path",label:"组件路径",required:!0,extra:{popover:"仅输入src/views后面的路径即可"}},{prop:"menu_path",label:"路由地址",required:!0,extra:{example:"/auth",tips:"建议跟组件路径保持一致"}},{prop:"is_cache",label:"是否缓存",type:"radio-group",required:!0,options:"YesNoStatus",extra:{span:12,popover:"是否缓存该页面"}},{prop:"is_show",label:"是否显示",type:"radio-group",required:!0,options:"YesNoStatus",extra:{span:12,popover:"在菜单目录中是否可见"}},{prop:"is_link",label:"是否外链",required:!0,type:"radio-group",options:"YesNoStatus",extra:{span:12}},1===f.is_link&&{prop:"is_blank_open",label:"新窗口打开",required:!0,type:"radio-group",options:"YesNoStatus",extra:{span:12}}]:[],{prop:"status",label:"状态",required:!0,type:"radio-group",options:"EnableStatus",extra:{span:12,popover:"启用后，在菜单中可见，否则不可见"}}]}));function X(e,t){"component_path"===e&&(f.menu_path||(f.menu_path=t.replace(".vue","")))}return function(e){if(!e)return;t({id:e}).then((e=>{const{type:t}=e;2===t&&(e.type=1),3===t&&(e.type=2),Object.assign(f,e)}))}(null==(y=x.data)?void 0:y.id),(t,o)=>{const s=u("BaseForm");return d(),m(s,{modelValue:f,"onUpdate:modelValue":o[2]||(o[2]=e=>f=e),style:{width:"600px"},fields:v.value,fetch:t.data?_(a):_(r),fetchSuccess:t.refreshList,onChange:X},{parent_id:c((()=>[h(p,{data:t.menuTree,modelValue:f.parent_id,"onUpdate:modelValue":o[0]||(o[0]=e=>f.parent_id=e)},null,8,["data","modelValue"])])),icon:c((({})=>[h(e,{modelValue:f.icon,"onUpdate:modelValue":o[1]||(o[1]=e=>f.icon=e)},null,8,["modelValue"])])),_:1},8,["modelValue","fields","fetch","fetchSuccess"])}}});export{y as _};
