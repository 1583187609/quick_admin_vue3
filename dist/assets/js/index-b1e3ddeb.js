import{d as e,o as a,c as t,a as o,V as s,e as l,k as n,ah as r,n as i}from"./@vue-2b5461a3.js";import{_ as m,a1 as p}from"./index-df51bfa3.js";const d={class:"custom-option f-sb-c"},u={class:"f-1 line-one"},c={class:"f-0 short-name"},f=m(e({__name:"CompanyOption",props:{fullName:{},shortName:{}},setup:e=>(e,l)=>(a(),t("div",d,[o("div",u,s(e.fullName||"-"),1),o("div",c,s(e.shortName),1)]))}),[["__scopeId","data-v-71efd4d6"]]),h={school:{reqNameKey:"name",resValKey:"id",fetchApi:e=>p("get","/options/school",e),defaultField:{prop:"xx",label:"学校",type:"select"},handleItem(e){const{name:a,id:t}=e;return{label:a,value:t}}},company:{reqNameKey:"name",resValKey:"id",fetchApi:e=>p("get","/options/company",e),defaultField:{prop:"gs",label:"公司",type:"select"},handleItem(e){const{fullName:a,shortName:t,id:o}=e;return{label:a,customOption:r(f,{fullName:a,shortName:t}),value:o}}}},v=()=>({getSearchOpts:function(e,a,t,o){if(!h[e])throw new Error(`不存在type为${e}的类型`);const{fetchApi:s,defaultField:r,handleItem:m,reqNameKey:p="name",resValKey:d="id",extraParams:u}=h[e],c=l(!1),f=l([]),v=n((()=>f.value.map(m)));function y(e="",a=!1){(e||a)&&(c.value=!!e,s({[p]:e,...u}).then((e=>{f.value=e||[]})).finally((()=>{c.value=!1})))}return t&&y(t),{...{...r,...a},options:v,attrs:{filterable:!0,remote:!0,remoteShowSuffix:!0,defaultFirstOption:!0,onFocus:()=>y("",!0),remoteMethod:y,onChange:o?function(e){const a=f.value.find((a=>a[d]===e));i((()=>{o(e,a)}))}:void 0,loading:c}}}});export{v as u};
