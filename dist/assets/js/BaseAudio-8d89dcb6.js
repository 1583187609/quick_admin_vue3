import{d as e,e as o,o as s,c as a,J as t,a as l,U as i,T as u,K as r,ai as n,W as p,V as m,P as d,Q as c}from"./@vue-2b5461a3.js";import{_ as v}from"./index-df51bfa3.js";import"./dayjs-70c6b0b9.js";import"./call-bind-2df1f9b5.js";import"./get-intrinsic-176af07e.js";import"./es-errors-c8ed318b.js";import"./has-symbols-456daba2.js";import"./has-proto-c2a23985.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./set-function-length-af5653fd.js";import"./define-data-property-80a6b8d7.js";import"./es-define-property-c2edbfb6.js";import"./gopd-991ce5b0.js";import"./has-property-descriptors-52e43c9d.js";import"./lodash-e3f0fdcb.js";import"./element-plus-568f2232.js";import"./lodash-es-d4f5f48c.js";import"./@vueuse-2ec33eb0.js";import"./@element-plus-df896130.js";import"./@popperjs-b78c3215.js";import"./@ctrl-91de2ec7.js";import"./async-validator-cf877c1f.js";import"./memoize-one-63ab667a.js";import"./normalize-wheel-es-3222b0a2.js";import"./@floating-ui-36fbce82.js";import"./qs-349681aa.js";import"./side-channel-4fcbcfeb.js";import"./object-inspect-1fd817f8.js";import"./axios-b9284f1b.js";import"./pinia-5cbb4d0f.js";import"./mock-281f81b0.js";import"./mockjs-21e11712.js";import"./vue-router-27db6c8e.js";import"./nprogress-61860a65.js";import"./vite-plugin-mock-fcfbfb18.js";import"./path-to-regexp-83a43451.js";import"./vue-i18n-aaa7cda4.js";import"./@intlify-34459bb4.js";import"./xlsx-8a748b86.js";const j={class:"f-0 ml-h"},f=["muted"],g=["src"],y=["src"],h=v(e({name:"BaseAudio",__name:"BaseAudio",props:{src:{},showProgress:{type:Boolean,default:!0},default:{type:Boolean,default:!0}},setup(e,{expose:v}){const h=o(null),b=o(!1),k=o(0),x=o(!1),T=o("00:00/00:00"),$=o(!0);function w(e){const{currentTime:o,duration:s}=h.value;T.value=`${z(o)}/${z(s)}`,$.value=!s}function M(e){const{currentTime:o,duration:s}=h.value;T.value=`${z(o)}/${z(s)}`,k.value=o/s*100}function P(){b.value=!1,T.value=`00:00/${z(h.value.duration)}`}function _(e){const{duration:o}=h.value;h.value.currentTime=o*(e/100),A()}function B(e){const{duration:o}=h.value,s=o*(e/100);T.value=`${z(s)}/${z(o)}`,I()}function C(){b.value?I():A()}function V(){$.value||(x.value=!x.value)}function z(e){e=Math.round(e);return[Math.floor(e/60),e%60].map((e=>(e<10?"0":"")+e)).join(":")}function A(){$.value||(b.value=!0,h.value.play())}function I(){$.value||(b.value=!1,h.value.pause())}return v({playing:b,progress:k,timeStr:T,muted:x,play:A,pause:I,audioCtx:h,toggleMuted:V,formatTime:z}),(e,o)=>{var v,q;const E=n("BaseIcon"),K=n("el-slider"),S=n("el-tooltip");return s(),a("div",{class:r(["base-audio f-sb-c",{default:!e.$slots.default}])},[t(e.$slots,"default",{playing:b.value,muted:x.value,currentTime:(null==(v=h.value)?void 0:v.currentTime)||0,duration:(null==(q=h.value)?void 0:q.duration)||0,timeStr:T.value,progress:k.value,play:A,pause:I,togglePlaying:C,toggleMuted:V,formatTime:z},(()=>[p(E,{onClick:C,size:"20",class:r(["f-0 btn",{disabled:$.value}]),name:b.value?"VideoPause":"VideoPlay"},null,8,["class","name"]),l("time",j,m(T.value),1),e.showProgress?(s(),d(K,{key:0,onChange:_,onInput:B,modelValue:k.value,"onUpdate:modelValue":o[0]||(o[0]=e=>k.value=e),"show-tooltip":!1,disabled:$.value,class:"f-1 ml-o"},null,8,["modelValue","disabled"])):u("",!0),p(S,{content:x.value?"取消静音":"静音","show-after":400,disabled:$.value},{default:c((()=>[p(E,{onClick:V,size:"20",class:r(["btn f-0 ml-h",{disabled:$.value}]),name:x.value?"Mute":"Microphone"},null,8,["class","name"])])),_:1},8,["content","disabled"])]),!0),e.src?(s(),a("audio",{key:0,onCanplay:w,onTimeupdate:M,onEnded:P,muted:x.value,controls:"",hidden:"",ref_key:"audioRef",ref:h},[l("source",{src:e.src,type:"audio/mpeg"},null,8,g),l("source",{src:e.src,type:"audio/ogg"},null,8,y),i(" 您的浏览器不支持音频播放 ")],40,f)):u("",!0)],2)}}}),[["__scopeId","data-v-1426e871"]]);export{h as default};
